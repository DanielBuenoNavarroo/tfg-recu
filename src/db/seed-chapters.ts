import { drizzle } from "drizzle-orm/neon-http";
import { neon } from "@neondatabase/serverless";
import { books, chapterGroups, chapters } from "./schema";
import { config } from "dotenv";

config({ path: ".env.local" });

const sql = neon(process.env.DATABASE_URL!);
const db = drizzle({ client: sql });

const chapterData = `{"type":"doc","content":[{"type":"paragraph","content":[{"type":"text","text":"There are things that must be done."}]},{"type":"paragraph"},{"type":"paragraph","content":[{"type":"text","text":"Not because anyone forces you to, nor because you want to."}]},{"type":"paragraph"},{"type":"paragraph","content":[{"type":"text","text":"Things that might bring you loss. Things that could even get you killed. And yet, they must be done."}]},{"type":"paragraph"},{"type":"paragraph","content":[{"type":"text","text":"The only consolation is that the world calls people who do such things heroes."}]},{"type":"paragraph"},{"type":"paragraph","content":[{"type":"text","text":"Indeed, history has been shaped by such heroes."}]},{"type":"paragraph"},{"type":"paragraph","content":[{"type":"text","text":"But then there are those who perform heroic deeds only to be met with scorn."}]},{"type":"paragraph"},{"type":"paragraph","content":[{"type":"text","text":"A pushover."}]},{"type":"paragraph"},{"type":"paragraph","content":[{"type":"text","text":"A derogatory term for someone who does all the hard work for others, only to be showered with insults."}]},{"type":"paragraph"},{"type":"paragraph","content":[{"type":"text","text":"Isaac Griffith was a pushover."}]},{"type":"paragraph"},{"type":"paragraph","content":[{"type":"text","text":"It wasn't intentional. He became a pushover entirely because of one piece of human trash."}]},{"type":"paragraph"},{"type":"paragraph","content":[{"type":"text","text":"“Come back, you son of a bitch!”"}]},{"type":"paragraph"},{"type":"paragraph","content":[{"type":"text","text":"Isaac shouted."}]},{"type":"paragraph"},{"type":"paragraph","content":[{"type":"text","text":"“This is insane!”"}]},{"type":"paragraph"},{"type":"paragraph","content":[{"type":"text","text":"The son of a bitch didn't look back."}]},{"type":"paragraph"},{"type":"paragraph","content":[{"type":"text","text":"His name was Charles. He was supposedly the greatest paladin on the continent, yet in the middle of a battle, he was sprinting away at full speed."}]},{"type":"paragraph"},{"type":"paragraph","content":[{"type":"text","text":"Seeing him run faster than a deer, even while wearing gold-plated full plate armor, gave a clear sense of how strong his desire for survival was."}]},{"type":"paragraph"},{"type":"paragraph","content":[{"type":"text","text":"“Such wonderful camaraderie.”"}]},{"type":"paragraph"},{"type":"paragraph","content":[{"type":"text","text":"A voice like scraping metal was heard. Isaac turned his head."}]},{"type":"paragraph"},{"type":"paragraph","content":[{"type":"text","text":"The Demon King, Baal."}]},{"type":"paragraph"},{"type":"paragraph","content":[{"type":"text","text":"The sovereign of demons, who had conquered most of the known world, was sneering at him."}]},{"type":"paragraph"},{"type":"paragraph","content":[{"type":"text","text":"A suicide squad of one hundred had come all the way to the Demon King's castle courtyard to assassinate Baal."}]},{"type":"paragraph"},{"type":"paragraph","content":[{"type":"text","text":"After a fierce battle, only two remained. With one having just fled, Isaac was the only one left."}]},{"type":"paragraph"},{"type":"paragraph","content":[{"type":"text","text":"“I don’t need a piece of trash like that anyway.”"}]},{"type":"paragraph"},{"type":"paragraph","content":[{"type":"text","text":"Isaac had disliked Charles from the very beginning."}]},{"type":"paragraph"},{"type":"paragraph","content":[{"type":"text","text":"His hypocrisy, pretending not to be the vile opportunist he was; his cowardice, always dodging difficult and arduous tasks; and his infuriatingly brilliant talent for navigating social situations."}]},{"type":"paragraph"},{"type":"paragraph","content":[{"type":"text","text":"But Charles's divine power was the real deal. If that bastard were to use his miracle of healing, Isaac's blood-soaked body would be cleansed as if washed anew."}]},{"type":"paragraph"},{"type":"paragraph","content":[{"type":"text","text":"“What do you plan to do now?”"}]},{"type":"paragraph"},{"type":"paragraph","content":[{"type":"text","text":"Baal slowly rose from his seat. Around him, ninety-eight corpses were scattered."}]},{"type":"paragraph"},{"type":"paragraph","content":[{"type":"text","text":"‘There’s still a chance.’"}]},{"type":"paragraph"},{"type":"paragraph","content":[{"type":"text","text":"Those bodies were not sacrificed in vain."}]},{"type":"paragraph"},{"type":"paragraph","content":[{"type":"text","text":"Though Baal appeared unharmed on the surface, the wounds he had sustained were surely not minor."}]},{"type":"paragraph"},{"type":"paragraph","content":[{"type":"text","text":"Isaac, too, was a wreck from his injuries and exhaustion, but he had a plan."}]},{"type":"paragraph"},{"type":"paragraph","content":[{"type":"text","text":"‘Forgive me.’"}]},{"type":"paragraph"},{"type":"paragraph","content":[{"type":"text","text":"Isaac focused his mind and activated the Griffith family's secret technique, <Black Soul>."}]},{"type":"paragraph"},{"type":"paragraph","content":[{"type":"text","text":"Colorless smoke billowed from his dead comrades and seeped into Isaac."}]},{"type":"paragraph"},{"type":"paragraph","content":[{"type":"text","text":"The power and memories accumulated in a hundred souls converged into Isaac's own."}]},{"type":"paragraph"},{"type":"paragraph","content":[{"type":"text","text":"“Gah!”"}]},{"type":"paragraph"},{"type":"paragraph","content":[{"type":"text","text":"Blood poured from every orifice in his head."}]},{"type":"paragraph"},{"type":"paragraph","content":[{"type":"text","text":"It was too much power for one soul to contain, too vast a collection of memories. It was like water overflowing a vessel, no matter how large the vessel was."}]},{"type":"paragraph"},{"type":"paragraph","content":[{"type":"text","text":"His entire body trembled uncontrollably, and his head throbbed as if it would explode. His soul, pushed far beyond its limits, was rapidly collapsing."}]},{"type":"paragraph"},{"type":"paragraph","content":[{"type":"text","text":"Isaac clenched his jaw and balled his fists."}]},{"type":"paragraph"},{"type":"paragraph","content":[{"type":"text","text":"“Is that the Griffith’s Black Soul?”"}]},{"type":"paragraph"},{"type":"paragraph","content":[{"type":"text","text":"Baal spoke in an intrigued tone."}]},{"type":"paragraph"},{"type":"paragraph","content":[{"type":"text","text":"If Baal were to avoid the fight and flee now, Isaac, already at his breaking point, would collapse on his own."}]},{"type":"paragraph"},{"type":"paragraph","content":[{"type":"text","text":"But Isaac knew the Demon King's competitive nature all too well."}]},{"type":"paragraph"},{"type":"paragraph","content":[{"type":"text","text":"“I always thought that if any being could defeat me, it would surely be a god or a Griffith.”"}]},{"type":"paragraph"},{"type":"paragraph","content":[{"type":"text","text":"The Griffiths were the royal family that had ruled the thousand-year kingdom of Aerok. After the kingdom was destroyed by the Demon King, the Griffith clan made vengeance their mission."}]},{"type":"paragraph"},{"type":"paragraph","content":[{"type":"text","text":"As the strongest member and representative of his family, Isaac had participated in the Demon King subjugation mission."}]},{"type":"paragraph"},{"type":"paragraph","content":[{"type":"text","text":"It was the same for his fallen comrades."}]},{"type":"paragraph"},{"type":"paragraph","content":[{"type":"text","text":"Some represented fallen kingdoms, others represented exiled peoples."}]},{"type":"paragraph"},{"type":"paragraph","content":[{"type":"text","text":"They were the strongest of their respective groups, and all had lost something they loved to the Demon King."}]},{"type":"paragraph"},{"type":"paragraph","content":[{"type":"text","text":"The resentment and thirst for vengeance they harbored became one, gathering at the tip of Isaac's sword."}]},{"type":"paragraph"},{"type":"paragraph","content":[{"type":"text","text":"“This will be a good chance to find out. Just how strong is the power of a Griffith.”"}]},{"type":"paragraph"},{"type":"paragraph","content":[{"type":"text","text":"The Demon King took a step."}]},{"type":"paragraph"},{"type":"paragraph","content":[{"type":"text","text":"Thud."}]},{"type":"paragraph"},{"type":"paragraph","content":[{"type":"text","text":"The earth shook and the sky rumbled."}]},{"type":"paragraph"},{"type":"paragraph","content":[{"type":"text","text":"He was only slightly taller than Isaac, but his stride was that of a giant."}]},{"type":"paragraph"},{"type":"paragraph","content":[{"type":"text","text":"Thud. Thud."}]},{"type":"paragraph"},{"type":"paragraph","content":[{"type":"text","text":"The Demon King walked slowly toward Isaac."}]},{"type":"paragraph"},{"type":"paragraph","content":[{"type":"text","text":"His presence overwhelmed the sky and made the very ground tremble. Just looking at him was enough to make one feel faint."}]},{"type":"paragraph"},{"type":"paragraph","content":[{"type":"text","text":"‘Damn it.’"}]},{"type":"paragraph"},{"type":"paragraph","content":[{"type":"text","text":"He wanted to run. But having used Black Soul, he would die even if he fled."}]},{"type":"paragraph"},{"type":"paragraph","content":[{"type":"text","text":"‘If I’m going to die, I’ll die like a Griffith.’"}]},{"type":"paragraph"},{"type":"paragraph","content":[{"type":"text","text":"Isaac corrected his stance."}]},{"type":"paragraph"},{"type":"paragraph","content":[{"type":"text","text":"His soul had already surpassed its limit. He didn't have the luxury of waiting for the Demon King."}]},{"type":"paragraph"},{"type":"paragraph","content":[{"type":"text","text":"“Uwaaaaah!”"}]},{"type":"paragraph"},{"type":"paragraph","content":[{"type":"text","text":"He pushed off the ground with all his might, his trembling legs finding strength."}]},{"type":"paragraph"},{"type":"paragraph","content":[{"type":"text","text":"The souls of his comrades breathed vitality into his near-dead body."}]},{"type":"paragraph"},{"type":"paragraph","content":[{"type":"text","text":"“Come.”"}]},{"type":"paragraph"},{"type":"paragraph","content":[{"type":"text","text":"The Demon King didn't wait either, launching himself toward Isaac."}]},{"type":"paragraph"},{"type":"paragraph","content":[{"type":"text","text":"Isaac offered his own body as bait and thrust out the sword that held everything of himself and his comrades."}]},{"type":"paragraph"},{"type":"paragraph","content":[{"type":"text","text":"Stab!"}]},{"type":"paragraph"},{"type":"paragraph","content":[{"type":"text","text":"The Demon King's skin, which had deflected the full-powered swing of the continent's greatest swordsman, was pierced without resistance."}]},{"type":"paragraph"},{"type":"paragraph","content":[{"type":"text","text":"It was the result of the combined power that ninety-nine heroes had accumulated over their entire lives."}]},{"type":"paragraph"},{"type":"paragraph","content":[{"type":"text","text":"“Cough!”"}]},{"type":"paragraph"},{"type":"paragraph","content":[{"type":"text","text":"Blood spurted from Isaac's mouth as well. The Demon King's sword had pierced through his abdomen."}]},{"type":"paragraph"},{"type":"paragraph","content":[{"type":"text","text":"“To become… one… again…”"}]},{"type":"paragraph"},{"type":"paragraph","content":[{"type":"text","text":"Blood trickled from the Demon King's eyes. Isaac pulled out the sword embedded in the Demon King's body."}]},{"type":"paragraph"},{"type":"paragraph","content":[{"type":"text","text":"“Uwaaaaah!”"}]},{"type":"paragraph"},{"type":"paragraph","content":[{"type":"text","text":"Slice!"}]},{"type":"paragraph"},{"type":"paragraph","content":[{"type":"text","text":"Wringing out his last ounce of strength, he beheaded the Demon King."}]},{"type":"paragraph"},{"type":"paragraph","content":[{"type":"text","text":"Thud!"}]},{"type":"paragraph"},{"type":"paragraph","content":[{"type":"text","text":"The severed head fell to the ground."}]},{"type":"paragraph"},{"type":"paragraph","content":[{"type":"text","text":"Isaac fell to his knees. The pool of blood on the ground continued to widen."}]},{"type":"paragraph"},{"type":"paragraph","content":[{"type":"text","text":"‘I did it.’"}]},{"type":"paragraph"},{"type":"paragraph","content":[{"type":"text","text":"He had done what had to be done. He had fulfilled his mission."}]},{"type":"paragraph"},{"type":"paragraph","content":[{"type":"text","text":"Isaac's life was over, but his fame would be eternal."}]},{"type":"paragraph"},{"type":"paragraph","content":[{"type":"text","text":"Statues would be erected in every plaza, and portraits would hang on every wall."}]},{"type":"paragraph"},{"type":"paragraph","content":[{"type":"text","text":"People would hold memorial services on the anniversary of Isaac's death to honor the noble hero's sacrifice."}]},{"type":"paragraph"},{"type":"paragraph","content":[{"type":"text","text":"‘Lucky bastards.’"}]},{"type":"paragraph"},{"type":"paragraph","content":[{"type":"text","text":"The Griffith family, having produced the Demon King Slayer, would reclaim its past fame and glory. His descendants would enjoy wealth and honor for generations to come."}]},{"type":"paragraph"},{"type":"paragraph","content":[{"type":"text","text":"‘It wasn’t a bad life.’"}]},{"type":"paragraph"},{"type":"paragraph","content":[{"type":"text","text":"Isaac smiled and closed his eyes."}]},{"type":"paragraph"},{"type":"paragraph","content":[{"type":"text","text":"* * *"}]},{"type":"paragraph"},{"type":"paragraph","content":[{"type":"text","text":"“My name is Edward Griffith?”"}]},{"type":"paragraph"},{"type":"paragraph","content":[{"type":"text","text":"Edward, the eldest son of the Griffith family, asked."}]},{"type":"paragraph"},{"type":"paragraph","content":[{"type":"text","text":"He had been unconscious, as if dead, for several days and had woken up only a few minutes ago, yet he kept spouting strange things."}]},{"type":"paragraph"},{"type":"paragraph","content":[{"type":"text","text":"“Yes, Young Master. You are the eldest son of the Griffith family.”"}]},{"type":"paragraph"},{"type":"paragraph","content":[{"type":"text","text":"An old man in a tailcoat replied with a pitiful expression."}]},{"type":"paragraph"},{"type":"paragraph","content":[{"type":"text","text":"He introduced himself as Frederick, the butler."}]},{"type":"paragraph"},{"type":"paragraph","content":[{"type":"text","text":"“I have served you for nearly twenty years, Young Master, and now I find myself having to introduce myself.”"}]},{"type":"paragraph"},{"type":"paragraph","content":[{"type":"text","text":"Edward Griffith didn't recognize Frederick at all."}]},{"type":"paragraph"},{"type":"paragraph","content":[{"type":"text","text":"That was because the one inside Edward's body was not Edward, but the soul of his ancestor, Isaac."}]},{"type":"paragraph"},{"type":"paragraph","content":[{"type":"text","text":"Isaac felt his own body. The wounds from the battle with the Demon King were all gone."}]},{"type":"paragraph"},{"type":"paragraph","content":[{"type":"text","text":"‘…Have I been reincarnated as a descendant?’"}]},{"type":"paragraph"},{"type":"paragraph","content":[{"type":"text","text":"He couldn't believe it. He had definitely died after killing the Demon King, but he was reborn the moment he died."}]},{"type":"paragraph"},{"type":"paragraph","content":[{"type":"text","text":"He had heard stories of reincarnation, but he had naturally assumed they were all nonsense."}]},{"type":"paragraph"},{"type":"paragraph","content":[{"type":"text","text":"“The priest did say you might lose your memory, and it seems he was right. How am I to tell the Baron about this…”"}]},{"type":"paragraph"},{"type":"paragraph","content":[{"type":"text","text":"The butler said with a devastated expression."}]},{"type":"paragraph"},{"type":"paragraph","content":[{"type":"text","text":"“Wait, my father is a Baron?”"}]},{"type":"paragraph"},{"type":"paragraph","content":[{"type":"text","text":"“That is correct.”"}]},{"type":"paragraph"},{"type":"paragraph","content":[{"type":"text","text":"“The Griffiths are royalty. Why a Baron?”"}]},{"type":"paragraph"},{"type":"paragraph","content":[{"type":"text","text":"The kingdom had been destroyed by the Demon King, but it wasn't the only one."}]},{"type":"paragraph"},{"type":"paragraph","content":[{"type":"text","text":"The leaders of the anti-Demon King coalition had agreed to restore the borders to their original state after the war and had even publicly announced it."}]},{"type":"paragraph"},{"type":"paragraph","content":[{"type":"text","text":"The Griffiths were a royal house, so they should naturally be royalty. With Isaac's achievements, they should have received even better treatment than the other families."}]},{"type":"paragraph"},{"type":"paragraph","content":[{"type":"text","text":"“That was the case in the distant past.”"}]},{"type":"paragraph"},{"type":"paragraph","content":[{"type":"text","text":"The butler said with a sigh."}]},{"type":"paragraph"},{"type":"paragraph","content":[{"type":"text","text":"“What year is it now?”"}]},{"type":"paragraph"},{"type":"paragraph","content":[{"type":"text","text":"“It is the year 2522 of the Holy Solar Calendar.”"}]},{"type":"paragraph"},{"type":"paragraph","content":[{"type":"text","text":"Exactly five hundred years had passed since his death. Five hundred years was more than enough time for a dynasty to fall."}]},{"type":"paragraph"},{"type":"paragraph","content":[{"type":"text","text":"“Just how terribly did they rule?”"}]},{"type":"paragraph"},{"type":"paragraph","content":[{"type":"text","text":"Isaac scowled."}]},{"type":"paragraph"},{"type":"paragraph","content":[{"type":"text","text":"He had laid the foundation for the family's revival with his own life, but it seemed his descendants had squandered it all."}]},{"type":"paragraph"},{"type":"paragraph","content":[{"type":"text","text":"“They all ruled well. However, the sin committed by your ancestor, Young Master, is by no means a light one.”"}]},{"type":"paragraph"},{"type":"paragraph","content":[{"type":"text","text":"Frederick said with a stiff expression."}]},{"type":"paragraph"},{"type":"paragraph","content":[{"type":"text","text":"“Ancestor? Who?”"}]},{"type":"paragraph"},{"type":"paragraph","content":[{"type":"text","text":"“Have you also forgotten that ‘Isaac the Betrayer’ was from the Griffith family?”"}]},{"type":"paragraph"},{"type":"paragraph","content":[{"type":"text","text":"“Betrayer? Are you perhaps talking about the Isaac who killed the Demon King five hundred years ago?”"}]},{"type":"paragraph"},{"type":"paragraph","content":[{"type":"text","text":"“That would be the Isaac who colluded with the Demon King five hundred years ago and stabbed the heroes in the back.”"}]},{"type":"paragraph"},{"type":"paragraph","content":[{"type":"text","text":"“What?”"}]},{"type":"paragraph"},{"type":"paragraph","content":[{"type":"text","text":"Sparks flew from Isaac's eyes."}]},{"type":"paragraph"},{"type":"paragraph","content":[{"type":"text","text":"“The one who killed the Demon King was me—I mean, Isaac!”"}]},{"type":"paragraph"},{"type":"paragraph","content":[{"type":"text","text":"“Have you been to another world, Young Master? The one who killed the Demon King was the Holy Emperor Charles.”"}]},{"type":"paragraph"},{"type":"paragraph","content":[{"type":"text","text":"Frederick clicked his tongue."}]},{"type":"paragraph"},{"type":"paragraph","content":[{"type":"text","text":"“Charles? You mean Paladin Charles?”"}]},{"type":"paragraph"},{"type":"paragraph","content":[{"type":"text","text":"“Indeed. He is the one who killed the Demon King and saved the world. He is also the founding emperor of the Holy Empire.”"}]},{"type":"paragraph"},{"type":"paragraph","content":[{"type":"text","text":"“That bastard didn't do a single thing!”"}]},{"type":"paragraph"},{"type":"paragraph","content":[{"type":"text","text":"Isaac exploded."}]},{"type":"paragraph"},{"type":"paragraph","content":[{"type":"text","text":"“You are likely the only person in this world who thinks so, Young Master.”"}]},{"type":"paragraph"},{"type":"paragraph","content":[{"type":"text","text":"Frederick retorted, shaking his head."}]},{"type":"paragraph"},{"type":"paragraph","content":[{"type":"text","text":"‘What in the world happened?’"}]},{"type":"paragraph"},{"type":"paragraph","content":[{"type":"text","text":"The main force of the coalition army had been stationed not far from the Demon King's castle courtyard."}]},{"type":"paragraph"},{"type":"paragraph","content":[{"type":"text","text":"They had been in a dangerous situation, surrounded by the demon army, but they had been fighting back valiantly in their own right."}]},{"type":"paragraph"},{"type":"paragraph","content":[{"type":"text","text":"When the Demon King dies, the demons who receive their power from him also lose their strength. The demons surrounding the main force would have collapsed."}]},{"type":"paragraph"},{"type":"paragraph","content":[{"type":"text","text":"The main force, having broken through the encirclement, would have quickly reached the site of the final battle. That was the plan, after all."}]},{"type":"paragraph"},{"type":"paragraph","content":[{"type":"text","text":"Though not on the level of the suicide squad, the main force had many skilled individuals. Just by examining the traces left on the battlefield, they should have been able to tell who killed the Demon King and how."}]},{"type":"paragraph"},{"type":"paragraph","content":[{"type":"text","text":"The Griffith family's Black Soul was a widely known secret technique. A mere glance at the battlefield would have revealed that its power had made the impossible possible."}]},{"type":"paragraph"},{"type":"paragraph","content":[{"type":"text","text":"‘Did Charles come back in the middle of it?’"}]},{"type":"paragraph"},{"type":"paragraph","content":[{"type":"text","text":"It seemed that Charles, who had fled, had returned for some reason and erased the evidence."}]},{"type":"paragraph"},{"type":"paragraph","content":[{"type":"text","text":"Then, when the main force arrived, he must have boasted as if he had killed the Demon King himself."}]},{"type":"paragraph"},{"type":"paragraph","content":[{"type":"text","text":"‘What did I do to deserve this…?’"}]},{"type":"paragraph"},{"type":"paragraph","content":[{"type":"text","text":"To top it all off, Charles had even framed Isaac as a traitor."}]},{"type":"paragraph"},{"type":"paragraph","content":[{"type":"text","text":"They had their disagreements, but the animosity between them wasn't that deep. They weren't friends, but they weren't enemies either."}]},{"type":"paragraph"},{"type":"paragraph","content":[{"type":"text","text":"Stealing the credit could be explained by his ambition, but framing Isaac as a traitor was incomprehensible."}]},{"type":"paragraph"},{"type":"paragraph","content":[{"type":"text","text":"“I’ll kill that bastard with my own hands…”"}]},{"type":"paragraph"},{"type":"paragraph","content":[{"type":"text","text":"Enraged, Isaac started to get out of bed."}]},{"type":"paragraph"},{"type":"paragraph","content":[{"type":"text","text":"The fact that five hundred years had already passed flashed through his mind. Not even Charles's ashes would remain, let alone Charles himself."}]},{"type":"paragraph"},{"type":"paragraph","content":[{"type":"text","text":"When that thought hit him, his vision went dark. A directionless rage tore at his chest."}]},{"type":"paragraph"},{"type":"paragraph","content":[{"type":"text","text":"“Cough!”"}]},{"type":"paragraph"},{"type":"paragraph","content":[{"type":"text","text":"It wasn't just his emotions that surged. Something forced its way up his throat and burst out of his mouth."}]},{"type":"paragraph"},{"type":"paragraph","content":[{"type":"text","text":"Dark red blood stained the front of his shirt and the floor."}]},{"type":"paragraph"},{"type":"paragraph","content":[{"type":"text","text":"“Young Master!”"}]},{"type":"paragraph"},{"type":"paragraph","content":[{"type":"text","text":"Frederick supported the staggering Isaac."}]},{"type":"paragraph"},{"type":"paragraph","content":[{"type":"text","text":"Clutching his chest, Isaac lay back down on the bed."}]},{"type":"paragraph"},{"type":"paragraph","content":[{"type":"text","text":"Somehow, the pain felt even worse than when he had been struck by the Demon King's sword."}]},{"type":"paragraph"},{"type":"paragraph","content":[{"type":"text","text":"“D-do I have some kind of illness?”"}]},{"type":"paragraph"},{"type":"paragraph","content":[{"type":"text","text":"He had felt an immense rage, but people don't just vomit blood because their emotions run high."}]},{"type":"paragraph"},{"type":"paragraph","content":[{"type":"text","text":"There had to be another reason."}]},{"type":"paragraph"},{"type":"paragraph","content":[{"type":"text","text":"“Young Master, you are afflicted with <Mana Reversal Syndrome>.”"}]},{"type":"paragraph"},{"type":"paragraph","content":[{"type":"text","text":"A note of pity tinged Frederick's voice."}]},{"type":"paragraph"},{"type":"paragraph","content":[{"type":"text","text":"Mana Reversal Syndrome. A disease where the mana in one's body flows in reverse, destroying the body from within."}]},{"type":"paragraph"},{"type":"paragraph","content":[{"type":"text","text":"Not only does it prevent the proper use of mana, but it also disrupts the body's balance, leading to a short life."}]},{"type":"paragraph"},{"type":"paragraph","content":[{"type":"text","text":"‘Damn it, if this was going to happen, why was I even reincarnated…?’"}]},{"type":"paragraph"},{"type":"paragraph","content":[{"type":"text","text":"All he had learned since being reincarnated was that the reward for sacrificing his life was being branded a traitor, and that he had a fatal illness."}]},{"type":"paragraph"},{"type":"paragraph","content":[{"type":"text","text":"He felt like he was going to die from sheer indignation, not Mana Reversal Syndrome."}]},{"type":"paragraph"},{"type":"paragraph","content":[{"type":"text","text":"‘No. It’s not entirely hopeless.’"}]},{"type":"paragraph"},{"type":"paragraph","content":[{"type":"text","text":"Isaac struggled to calm his agitation."}]},{"type":"paragraph"},{"type":"paragraph","content":[{"type":"text","text":"‘Only ignorant fools die from Mana Reversal Syndrome…’"}]},{"type":"paragraph"},{"type":"paragraph","content":[{"type":"text","text":"At that moment, Isaac's train of thought stopped."}]},{"type":"paragraph"},{"type":"paragraph","content":[{"type":"text","text":"The thoughts that had come to him so naturally felt incredibly unfamiliar."}]},{"type":"paragraph"},{"type":"paragraph","content":[{"type":"text","text":"The thought that while Mana Reversal Syndrome was considered an incurable disease these days, thousands of years ago it was considered a blessing from the gods."}]},{"type":"paragraph"},{"type":"paragraph","content":[{"type":"text","text":"The thought that mana flowing in reverse meant a higher output. If one could only control that flow, one could become a mana user far superior to others."}]},{"type":"paragraph"},{"type":"paragraph","content":[{"type":"text","text":"‘What is this?’"}]},{"type":"paragraph"},{"type":"paragraph","content":[{"type":"text","text":"No matter how much he searched his memory, he couldn't find the source of these thoughts."}]},{"type":"paragraph"},{"type":"paragraph","content":[{"type":"text","text":"They were thoughts he had never heard from anyone, nor read in any book."}]},{"type":"paragraph"},{"type":"paragraph","content":[{"type":"text","text":"It wasn't that he had known and forgotten."}]},{"type":"paragraph"},{"type":"paragraph","content":[{"type":"text","text":"In his past life, Isaac had a younger brother who died young from Mana Reversal Syndrome."}]},{"type":"paragraph"},{"type":"paragraph","content":[{"type":"text","text":"He had researched and investigated more than anyone else to save his brother. He never missed even the most trivial detail about Mana Reversal Syndrome."}]},{"type":"paragraph"},{"type":"paragraph","content":[{"type":"text","text":"He could swear that he had never learned what he had just recalled."}]},{"type":"paragraph"},{"type":"paragraph","content":[{"type":"text","text":"But now, Isaac even knew the specific method to control Mana Reversal Syndrome."}]},{"type":"paragraph"},{"type":"paragraph","content":[{"type":"text","text":"‘It’s as if…’"}]},{"type":"paragraph"},{"type":"paragraph","content":[{"type":"text","text":"It felt like he had just discovered knowledge that someone had secretly placed inside his head."}]},{"type":"paragraph"},{"type":"paragraph","content":[{"type":"text","text":"‘Could it be?’"}]},{"type":"paragraph"},{"type":"paragraph","content":[{"type":"text","text":"Isaac remembered that he had used Black Soul right before he died."}]},{"type":"paragraph","content":[{"type":"text","text":"(End of Chapter)"}]}]}`;

function getRandomChapterCount(): number {
  return Math.floor(Math.random() * 11) + 10;
}

function getChronologicalDates(count: number): Date[] {
  const now = Date.now();
  const fourYearsAgo = now - 4 * 365 * 24 * 60 * 60 * 1000;

  return Array.from({ length: count }).map((_, i) => {
    const ratio = i / (count - 1);
    const timestamp = fourYearsAgo + ratio * (now - fourYearsAgo);
    return new Date(timestamp);
  });
}

function getRandomVisits(): number {
  return Math.floor(Math.random() * 1001);
}

const seedChapters = async () => {
  console.log("Seeding capítulos...");

  try {
    const allBooks = await db.select().from(books);

    for (const book of allBooks) {
      const [group] = await db
        .insert(chapterGroups)
        .values({
          bookId: book.id,
          name: "Season 1",
          order: 1,
          isPublic: true,
        })
        .returning();

      const chapterCount = getRandomChapterCount();
      const dates = getChronologicalDates(chapterCount);
      const newChapters = Array.from({ length: chapterCount }).map((_, i) => ({
        bookId: book.id,
        groupId: group.id,
        order: i + 1,
        title: `Chapter ${i + 1}`,
        isPublic: true,
        content: chapterData,
        publicDate: dates[i],
        visits: getRandomVisits(),
      }));

      await db.insert(chapters).values(newChapters);

      console.log(
        `Libro "${book.title}" → grupo creado con ${chapterCount} capítulos`
      );
    }

    console.log("Seeder de capítulos completado");
  } catch (e) {
    console.error("Error al hacer seed de capítulos:", e);
  }
};

seedChapters();
